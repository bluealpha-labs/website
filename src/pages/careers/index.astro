---
import Layout from '#layouts/layout.astro'
import { careersIndexTitle } from '#utils/seo.ts'
import { getCollection } from 'astro:content'
import { ContentHeader01 } from '#components/content/content-header/content-header-01.tsx'
import { RemainingContentGridItem } from '#components/content/remaining-content/remaining-content-grid-item.tsx'
import { RemainingContentGrid } from '#components/content/remaining-content/remaining-content-grid.tsx'
import { RemainingContentTitle } from '#components/content/remaining-content/remaining-content-title.tsx'
import { RemainingContent } from '#components/content/remaining-content/remaining-content.tsx'
import { ContentCard03 } from '#components/content/content-card/content-card-03.tsx'
import { departmentNames } from '#constants/career.ts'

const collection = await getCollection('careers')
const published = collection.filter((entry) => entry.data.status === 'published')
---

<Layout className='py-20' title={careersIndexTitle()}>
  <ContentHeader01
    label='Careers'
    title='Join the BlueAlpha team'
    titleAs='h1'
    description='BlueAlpha is rewriting how marketing technology is engineered. If you want to push agentic AI beyond the lab and into production at scale, this is your chance.'
  />
  <RemainingContent>
    <RemainingContentTitle>All careers</RemainingContentTitle>
    <RemainingContentGrid>
      {
        published.map(({ data, slug }) => {
          const departmentName = departmentNames[data.department]

          return (
            <RemainingContentGridItem key={data.title}>
              <ContentCard03
                label={departmentName}
                title={data.title}
                image={data.image.src}
                href={`/careers/${slug}`}
              />
            </RemainingContentGridItem>
          )
        })
      }
    </RemainingContentGrid>
  </RemainingContent>
</Layout>
